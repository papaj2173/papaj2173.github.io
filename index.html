<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Save Data to GitHub</title>
</head>
<body>
  <h1>Save Data to GitHub</h1>
  
  <!-- Input fields for user data -->
  <form id="dataForm">
    <label for="input1">Input 1:</label><br>
    <input type="text" id="input1" name="input1" required><br><br>
    
    <label for="input2">Input 2:</label><br>
    <input type="text" id="input2" name="input2" required><br><br>
    
    <input type="submit" value="Save Data">
  </form>

  <p id="status"></p>

  <script>
    // GitHub API info
    const username = 'your-github-username';
    const repo = 'input-to-file';  // Replace with your repository name
    const filePath = 'data.txt';   // File where the data will be saved
    const accessToken = 'your-personal-access-token';  // GitHub Personal Access Token

    // Form submission event handler
    document.getElementById('dataForm').addEventListener('submit', function(event) {
      event.preventDefault();

      const input1 = document.getElementById('input1').value;
      const input2 = document.getElementById('input2').value;

      const dataToSave = `Input 1: ${input1}\nInput 2: ${input2}\n`;

      saveToGitHub(dataToSave);
    });

    // Function to save data to GitHub
    async function saveToGitHub(data) {
      const apiUrl = `https://api.github.com/repos/${username}/${repo}/contents/${filePath}`;
      
      // Get the current content of the file to get the SHA for updating
      try {
        const response = await fetch(apiUrl, {
          method: 'GET',
          headers: {
            'Authorization': `token ${accessToken}`,
          },
        });

        let sha = '';
        if (response.ok) {
          const fileData = await response.json();
          sha = fileData.sha;
        }

        // Now create or update the file on GitHub
        const updateResponse = await fetch(apiUrl, {
          method: 'PUT',
          headers: {
            'Authorization': `token ${accessToken}`,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            message: 'Update data.txt with new inputs',
            content: btoa(data),  // Convert the data to Base64
            sha: sha,  // If the file exists, update it with the SHA
          }),
        });

        const status = await updateResponse.json();
        if (updateResponse.ok) {
          document.getElementById('status').textContent = 'Data saved successfully!';
        } else {
          document.getElementById('status').textContent = `Error: ${status.message}`;
        }

      } catch (error) {
        document.getElementById('status').textContent = `Error: ${error.message}`;
      }
    }
  </script>
</body>
</html>
